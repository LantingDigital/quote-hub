rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Config: Public can read, admin can write
    match /config/main {
      allow get: if true;
      allow write: if request.auth != null;
    }

    // Quotes:
    match /quotes/{quoteId} {
      // 'get' allows a single document read. 
      // This is for the public URL.
      allow get: if true;

      // 'list' (for the "All Quotes" page) and 'write' (for create/update)
      // are only allowed if you are a logged-in user (admin).
      allow list, write: if request.auth != null;
    }

    // Add rules for your user collection
    match /users/{userId} {
      allow read, write: if request.auth.uid == userId;
    }
  }
}
